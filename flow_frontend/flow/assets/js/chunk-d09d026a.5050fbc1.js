(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d09d026a"],{"042e":function(e,t,n){},"096b":function(e,t,n){"use strict";var a=n("9eb7"),r=n.n(a);r.a},"608b":function(e,t,n){},"707c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-container",staticStyle:{"padding-top":"50px"}},[n("el-row",{attrs:{justify:"center",type:"flex"}},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"action-group"},[n("el-row",{attrs:{justify:"space-between",type:"flex"}},[n("el-col",{staticClass:"action-group-left"},[n("el-button",{staticClass:"action-btn",attrs:{disabled:!e.multipleSelection.length,circle:"",icon:"el-icon-delete",type:"danger",size:"small"},on:{click:e.deleteProjects}})],1),e._v(" "),n("el-col",{staticClass:"action-group-right"},[n("el-button",{staticClass:"action-btn",attrs:{size:"medium"},on:{click:function(t){e.isShowDialog=!0}}},[e._v("\n                            创建项目\n                        ")])],1)],1)],1),e._v(" "),n("el-divider"),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.project_list,border:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"项目名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{on:{click:function(n){return e.$router.push({path:"/graph/"+t.row.id})}}},[e._v(e._s(t.row.project_name)+"\n                        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"所有者",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.owner))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"编辑时间",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.modified_time))])]}}])})],1),e._v(" "),n("div",{staticClass:"paginator"},[n("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.listQuery.page,"page-size":e.listQuery.page_size,"page-sizes":[10,20],total:e.count,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.pageCurrentChange,"size-change":e.pageSizeChange}})],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{"append-to-body":!1,"close-on-click-modal":!1,"modal-append-to-body":!0,visible:e.isShowDialog,"custom-class":"preview-dialog",title:"创建项目"},on:{"update:visible":function(t){e.isShowDialog=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-position":"top"}},[n("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[n("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createProject(t)}},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:""===e.form.projectName||""===e.form.owner,type:"primary"},on:{click:e.createProject}},[e._v("完 成\n            ")])],1)],1)],1)},r=[],o=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),i=n("e74e"),c=(n("c24f"),n("5c96")),s=n("2f62");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){Object(o["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p={name:"Project",data:function(){return{listQuery:{page:1,page_size:10},count:0,isShowDialog:!1,project_list:[],loading:!1,form:{projectName:""},rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},multipleSelection:[]}},computed:u({},Object(s["b"])(["token","username"])),filters:{statusFilter:function(e){switch(e){case"init":return"初始化";case"loading":return"运行中";case"complete":return"已完成"}}},created:function(){this.getGraphs()},methods:{getGraphs:function(){var e=this;this.loading=!0,i["a"].getGraphs(this.listQuery).then(function(t){e.count=t.count,e.project_list=t.res,e.loading=!1}).catch(function(t){e.loading=!1})},pageSizeChange:function(e){this.listQuery.page_size=e,this.listQuery.page=1,this.getGraphs()},pageCurrentChange:function(e){this.listQuery.page=e,this.getGraphs()},createProject:function(){var e=this;this.$refs["ruleForm"].validate(function(t){t&&i["a"].createGraph(e.form).then(function(t){Object(c["Notification"])({title:"成功",message:"创建项目成功",type:"success",duration:3e3}),e.getGraphs(),e.isShowDialog=!1,e.form.projectName="",e.form.owner=""}).catch(function(e){Object(c["Notification"])({title:"错误",message:e.data,type:"error",duration:3e3})})})},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.multipleSelection=t,console.log(this.multipleSelection)},deleteProjects:function(){var e=this;this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(function(){return i["a"].deleteGraphs({projectIds:e.multipleSelection})}).then(function(t){Object(c["Notification"])({title:"成功",message:"文件移除成功",type:"success",duration:3e3}),e.getGraphs()}).catch(function(t){e.$message({type:"cancel"==t?"info":"error",message:"cancel"==t?"已取消删除":t.data})})}}},f=p,d=(n("abf1"),n("096b"),n("c4fa"),n("2877")),g=Object(d["a"])(f,a,r,!1,null,"65b4f666",null);t["default"]=g.exports},"9eb7":function(e,t,n){},abf1:function(e,t,n){"use strict";var a=n("608b"),r=n.n(a);r.a},c4fa:function(e,t,n){"use strict";var a=n("042e"),r=n.n(a);r.a}}]);